{
    "builders": [{
        "type": "googlecompute",
        "account_file": "/etc/kubestack-account.json",
        "project_id": "kubestack",
        "source_image": "kubestack-0-0-1-v20150517",
        "zone": "us-central1-a",
        "disk_size": 100,
        "image_name": "kubestack-server-0-0-1-v20150517",
        "image_description": "CoreOS Kubernetes Server Image",
        "machine_type": "n1-standard-1",
        "ssh_username": "core"
    }],
    "provisioners": [{
        "type": "file",
        "source": "units",
        "destination": "/tmp"
    },
    {
        "type": "shell",
        "inline": [
            "sudo mv /tmp/units/flannel.service /etc/systemd/system",
            "sudo mv /tmp/units/docker.service /etc/systemd/system",
            "sudo mv /tmp/units/kube-apiserver.service /etc/systemd/system",
            "sudo mv /tmp/units/kube-controller-manager.service /etc/systemd/system",
            "sudo mv /tmp/units/kube-scheduler.service /etc/systemd/system",
            "sudo systemctl enable flannel",
            "sudo systemctl enable docker",
            "sudo systemctl enable kube-apiserver",
            "sudo systemctl enable kube-controller-manager",
            "sudo systemctl enable kube-scheduler",
            "rm -rf /tmp/units"
        ]
    }]
}
